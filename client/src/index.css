/* Leaflet CSS */
@import url('https://unpkg.com/leaflet@1.9.4/dist/leaflet.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Extra small screens breakpoint utilities */
  @media (min-width: 480px) {
    .xs\:inline {
      display: inline;
    }
  }
}

/* Map container isolation */
.leaflet-container {
  z-index: 1 !important;
  position: relative !important;
}

.leaflet-pane {
  z-index: 1 !important;
}

.leaflet-map-pane {
  z-index: 1 !important;
}

/* Ensure map stays contained */
.leaflet-control-container {
  z-index: 10 !important;
}

/* Mobile-friendly marker styles */
.mobile-friendly-marker {
  touch-action: manipulation !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

.mobile-friendly-marker > div {
  touch-action: manipulation !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  user-select: none !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
}

/* Improve marker visibility on mobile */
@media (max-width: 768px) {
  .leaflet-marker-icon {
    border-radius: 50% !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
  }
  
  .leaflet-popup-pane {
    z-index: 700 !important;
  }
}

@font-face {
  font-family: 'GoodDog New';
  src: url('/fonts/gooddognew.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root {
  --background: 210 11% 98%;
  --foreground: 215 25% 27%;
  --muted: 210 11% 96%;
  --muted-foreground: 215 16% 47%;
  --popover: 0 0% 100%;
  --popover-foreground: 215 25% 27%;
  --card: 0 0% 100%;
  --card-foreground: 215 25% 27%;
  --border: 215 12% 92%;
  --input: 215 12% 92%;
  --primary: 222 84% 60%;
  --primary-foreground: 210 40% 98%;
  --secondary: 263 70% 65%;
  --secondary-foreground: 210 40% 98%;
  --accent: 210 11% 96%;
  --accent-foreground: 215 25% 27%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 60 9% 98%;
  --ring: 222 84% 60%;
  --radius: 0.75rem;
  --success: 142 71% 45%;
  --warning: 38 92% 50%;
}

.dark {
  --background: 222 84% 5%;
  --foreground: 210 40% 98%;
  --muted: 215 28% 17%;
  --muted-foreground: 215 20% 65%;
  --popover: 222 84% 5%;
  --popover-foreground: 210 40% 98%;
  --card: 222 84% 5%;
  --card-foreground: 210 40% 98%;
  --border: 215 28% 17%;
  --input: 215 28% 17%;
  --primary: 222 84% 60%;
  --primary-foreground: 210 40% 98%;
  --secondary: 263 70% 65%;
  --secondary-foreground: 210 40% 98%;
  --accent: 215 28% 17%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 63% 31%;
  --destructive-foreground: 210 40% 98%;
  --ring: 222 84% 60%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-family: 'Inter', system-ui, sans-serif;
  }
}

@layer components {
  .typeform-card {
    @apply bg-white rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  }

  .service-tile {
    @apply bg-gradient-to-br rounded-2xl p-6 border-2 border-transparent hover:border-primary hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1;
  }

  .service-tile.selected {
    @apply border-primary bg-blue-50 shadow-lg -translate-y-1;
  }

  .gradient-bg {
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);
  }

  .hero-gradient {
    background: linear-gradient(135deg, #f0f4ff 0%, #ffffff 50%, #f3e8ff 100%);
  }

  .step-indicator {
    @apply w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6;
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--secondary)) 100%);
  }

  .tile-hover {
    @apply hover:border-primary hover:bg-blue-50 transition-all duration-300 transform hover:scale-105;
  }

  .pricing-card {
    @apply bg-white rounded-2xl p-6 border border-gray-200 hover:shadow-xl hover:border-primary transition-all duration-300;
  }

  .pricing-card.popular {
    @apply border-primary bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .bg-success {
    background-color: hsl(var(--success));
  }
  
  .text-success {
    color: hsl(var(--success));
  }
  
  .bg-warning {
    background-color: hsl(var(--warning));
  }
  
  .text-warning {
    color: hsl(var(--warning));
  }
}

/* Custom scrollbar for better UX */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground));
}

/* Custom styles for Leaflet installer markers */
.installer-marker-icon {
  background: transparent !important;
  border: none !important;
}

.installer-popup {
  max-width: 250px;
}

.installer-popup .leaflet-popup-content-wrapper {
  padding: 0;
}

.installer-popup .leaflet-popup-content {
  margin: 0;
  padding: 12px;
}

/* Hide scrollbar for specific elements */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Animation classes */
.fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.slide-up {
  animation: slideUp 0.6s ease-out;
}

.scale-in {
  animation: scaleIn 0.4s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Pulse animation for active elements */
.pulse-primary {
  animation: pulsePrimary 2s infinite;
}

@keyframes pulsePrimary {
  0%, 100% {
    box-shadow: 0 0 0 0 hsla(var(--primary), 0.4);
  }
  50% {
    box-shadow: 0 0 0 10px hsla(var(--primary), 0);
  }
}
